#!/bin/bash

add_con_path="/var/www/html/FCIS/admin/pages/tables/add_con.php"
replacement_file="mitigation-code.txt"

replacement_code=$(<"$replacement_file")

if grep -q "$replacement_code" "$add_con_path"; then
    echo "The mitigation code is already in $add_con_path. No changes were made."
else
    # The SQL query is replaced with the sanitized code
    sed -i "s|SELECT \* FROM chickens WHERE chicken_id = '\$id'|$replacement_code|" "$add_con_path"
    
    echo "Mitigation applied in $add_con_path"
fi